name: test-paths

on: workflow_dispatch

jobs:
    test-installations:
        runs-on: ubuntu-latest
        container:
            image: glotzerlab/software:beta-nompi
            # Necessary to have proper permissions for the following steps
            options: --user 1001
        steps:
            - name: extend path
              run : echo "$HOME/.local/bin" >> $GITHUB_PATH
            - name: print info
              run: |
                  echo "$PATH"
                  ls "$HOME"
                  echo "$HOME"
                  echo "$PATH"
            - uses: actions/checkout@v2
            - name: install stuff
              run: |
                  python3 -m pip install virtualenv --progress-bar off --user -U
            - name: attempt to run things
              run: |
                  python3 -m venv "${HOME}/test-env"
                  . "${HOME}/test-env/bin/activate"
